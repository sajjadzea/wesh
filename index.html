<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุญูู ุชุนุงูู ุจุญุฑุงู ุนุฏู ุชุนุงุฏู ุจุฑู ุงุฑุงู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/cytoscape@3/dist/cytoscape.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: "Calm Harmony" - A combination of Slate, Stone, and a touch of Teal for a serious, analytical yet clean feel. -->
    <!-- Application Structure Plan: A top-down, narrative-driven dashboard. It starts with the core problem (the electricity gap), then allows users to explore the 'causes' (PESTLE factors grouped by Supply/Demand), visualizes the system's 'dynamics' with an interactive causal loop, and finally presents the 'solutions'. This structure is chosen over a simple PESTLE list to create a more engaging story, guiding the user from effect to cause to system behavior, which enhances understanding and retention. -->
    <!-- Visualization & Content Choices:
        - Key Metrics (Large Text): Goal: Inform/Impact. Presents critical numbers (deficit, economic loss) for immediate impact. Method: HTML/Tailwind.
        - Supply vs. Demand Trend (Line Chart): Goal: Show Change. Visualizes the widening gap over time. Method: Chart.js Canvas. Interaction: Tooltips on hover. Justification: A line chart is the best tool for showing trends.
        - Energy Mix (Donut Chart): Goal: Show Proportions. Highlights heavy reliance on fossil fuels. Method: Chart.js Canvas. Interaction: Tooltips. Justification: A donut chart is effective for showing parts of a whole.
        - PESTLE Factors (Interactive Cards): Goal: Organize/Inform. Breaks down complex info into manageable, user-driven pieces. Method: HTML/Tailwind/JS for toggling visibility. Justification: Avoids overwhelming users with a wall of text.
        - Causal Loop Diagram (Interactive Diagram): Goal: Show Relationships. Makes the abstract concept of feedback loops tangible. Method: HTML/CSS/JS. Interaction: Clicking nodes reveals info. Justification: This is the core "systems thinking" element, simplified for clarity.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Vazirmatn', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 350px; max-height: 50vh; }
        .active-tab { border-color: #0d9488; color: #0d9488; background-color: #f0fdfa; }
        .inactive-tab { border-color: transparent; color: #52525b; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <nav class="mb-4">
                <a href="index.html" class="text-teal-700 mx-2">ุฎุงูู</a>
                <a href="dash/causal-graph.html" class="text-teal-700 mx-2">ูููุฏุงุฑ ุนูู ุนุฑุถู ู ุชูุงุถุง ุจุฑู</a>
            </nav>
            <h1 class="text-3xl md:text-4xl font-bold text-teal-800 mb-2">ุจุญุฑุงู ุนุฏู ุชุนุงุฏู ุจุฑู ุงุฑุงู: ฺฉ ูฺฏุงู ุณุณุชู</h1>
            <p class="text-lg text-slate-600 max-w-3xl mx-auto">ุงู ุฏุงุดุจูุฑุฏ ุชุนุงููุ ุชุญูู ุฌุงูุน PESTLE ู ุชูฺฉุฑ ุณุณุชู ุงุฒ ฺุงูุดโูุง ุจุฎุด ุจุฑู ุงุฑุงู ุฑุง ุจู ุชุตูุฑ ูโฺฉุดุฏ ู ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ุชุง ุฏูุงูุ ุฏูุงูฺฉโูุง ู ุฑุงูโุญูโูุง ุจุงูููู ุงู ุจุญุฑุงู ุฑุง ฺฉุงูุด ฺฉูุฏ.</p>
        </header>

        <main>
            <section id="problem" class="mb-16 bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold text-center mb-2 text-red-700">ุจุฎุด ุงูู: ุงุจุนุงุฏ ุจุญุฑุงู - ุดฺฉุงู ูุฒุงูุฏู ุนุฑุถู ู ุชูุงุถุง</h2>
                <p class="text-center text-slate-600 mb-8 max-w-4xl mx-auto">ูุณุชู ุงุตู ุจุญุฑุงู ุจุฑู ุงุฑุงูุ ูุงุชูุงู ูุฒุงูุฏู ุฏุฑ ุชููุฏ ุจุฑู ุจู ูุฒุงู ุชูุงุถุง ุฑูุฒุงูุฒูู ุงุณุช. ุงู ุดฺฉุงูุ ฺฉู ุณุงู ุจู ุณุงู ุนููโุชุฑ ูโุดูุฏุ ููุฌุฑ ุจู ุฎุงููุดโูุง ฺฏุณุชุฑุฏู ู ุฎุณุงุฑุงุช ุงูุชุตุงุฏ ููฺฏูุช ุดุฏู ุงุณุช. ูููุฏุงุฑ ู ฺฉุงุฑุชโูุง ุฒุฑุ ูุถุนุช ูุนู ู ุฑููุฏ ุงู ฺุงูุด ุฑุง ูุดุงู ูโุฏููุฏ.</p>
                
                <div class="grid md:grid-cols-3 gap-6 text-center mb-10">
                    <div class="bg-red-50 p-6 rounded-lg border border-red-200">
                        <h3 class="text-xl font-semibold text-red-800">ฺฉุณุฑ ุชุฎูู ุจุฑู</h3>
                        <p class="text-4xl font-bold text-red-600 my-2">~ฒตูฌฐฐฐ</p>
                        <p class="text-slate-600">ูฺฏุงูุงุช ุฏุฑ ุฒูุงู ุงูุฌ ูุตุฑู</p>
                    </div>
                    <div class="bg-amber-50 p-6 rounded-lg border border-amber-200">
                        <h3 class="text-xl font-semibold text-amber-800">ุฎุณุงุฑุช ุงูุชุตุงุฏ ุณุงูุงูู</h3>
                        <p class="text-4xl font-bold text-amber-600 my-2">~ต-ธ</p>
                        <p class="text-slate-600">ููุงุฑุฏ ุฏูุงุฑ ุจู ุจุฎุด ุตูุนุช</p>
                    </div>
                    <div class="bg-sky-50 p-6 rounded-lg border border-sky-200">
                        <h3 class="text-xl font-semibold text-sky-800">ุชููุงุช ุดุจฺฉู</h3>
                        <p class="text-4xl font-bold text-sky-600 my-2">+ฑฑูช</p>
                        <p class="text-slate-600">ุจุงูุงุชุฑ ุงุฒ ูุงูฺฏู ุฌูุงู (ธูช)</p>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="supplyDemandChart"></canvas>
                </div>
            </section>

            <section id="drivers" class="mb-16">
                <h2 class="text-2xl font-bold text-center mb-2 text-teal-800">ุจุฎุด ุฏูู: ุฑุดูโูุง ุจุญุฑุงู - ุชุญูู ุนูุงูู ฺฉูุฏ (PESTLE)</h2>
                 <p class="text-center text-slate-600 mb-8 max-w-4xl mx-auto">ุงู ุจุญุฑุงู ูุญุตูู ูุฌููุนูโุง ุงุฒ ุนูุงูู ุฏุฑููโุชูุฏู ุงุณุช. ุฏุฑ ุงู ุจุฎุดุ ูโุชูุงูุฏ ุนูุงูู ฺฉูุฏ ุฑุง ฺฉู ุจู ุฏู ุฏุณุชู ุงุตู "ูุดุงุฑ ุจุฑ ุณูุช ุนุฑุถู" ู "ูุญุฑฺฉโูุง ุณูุช ุชูุงุถุง" ุชูุณู ุดุฏูโุงูุฏุ ุจุฑุฑุณ ฺฉูุฏ. ุจุฑุง ูุดุงูุฏู ุฌุฒุฆุงุช ูุฑ ุนุงููุ ุฑู ุขู ฺฉูฺฉ ฺฉูุฏ.</p>
                <div class="flex justify-center mb-8 border-b border-slate-300">
                    <button id="supply-tab" class="px-6 py-3 font-semibold text-lg border-b-2 transition-all duration-300 active-tab">ูุดุงุฑ ุจุฑ ุณูุช ุนุฑุถู</button>
                    <button id="demand-tab" class="px-6 py-3 font-semibold text-lg border-b-2 transition-all duration-300 inactive-tab">ูุญุฑฺฉโูุง ุณูุช ุชูุงุถุง</button>
                </div>

                <div id="drivers-content" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
            </section>
            
            <section class="mb-16 grid lg:grid-cols-2 gap-8 items-center bg-white p-6 rounded-xl shadow-md">
                <div>
                     <h2 class="text-2xl font-bold text-center lg:text-right mb-2 text-teal-800">ูุงุจุณุชฺฏ ุดุฏุฏ ุจู ุณูุฎุชโูุง ูุณู</h2>
                     <p class="text-slate-600 mb-6 text-center lg:text-right">ุณุจุฏ ุชููุฏ ุจุฑู ุงุฑุงู ุจู ุดุฏุช ุจู ุณูุฎุชโูุง ูุณู ูุงุจุณุชู ุงุณุช. ุงู ูุงุจุณุชฺฏุ ฺฉุดูุฑ ุฑุง ุฏุฑ ุจุฑุงุจุฑ ฺฉูุจูุฏ ฺฏุงุฒ ู ููุณุงูุงุช ููุช ุขุณุจโูพุฐุฑ ฺฉุฑุฏู ู ููุฌุฑ ุจู ุขููุฏฺฏ ููุง ู ุงูุชุดุงุฑ ฺฏุงุฒูุง ฺฏูุฎุงููโุง ูโุดูุฏ. ุชูุณุนู ฺฉูุฏ ุงูุฑฺโูุง ุชุฌุฏุฏูพุฐุฑ (ฺฉูุชุฑ ุงุฒ ฒูช) ุงู ฺุงูุด ุฑุง ุชุดุฏุฏ ูโฺฉูุฏ.</p>
                     <div class="grid grid-cols-2 gap-4 text-center">
                         <div class="bg-teal-50 p-4 rounded-lg">
                             <h4 class="font-semibold text-teal-700">ุณูู ฺฏุงุฒ ุทุจุน</h4>
                             <p class="text-2xl font-bold text-teal-600">~ธฐูช</p>
                         </div>
                         <div class="bg-orange-50 p-4 rounded-lg">
                             <h4 class="font-semibold text-orange-700">ุณูู ููุช ู ูุงุนุงุช</h4>
                             <p class="text-2xl font-bold text-orange-600">~ฑณูช</p>
                         </div>
                     </div>
                </div>
                <div class="chart-container h-72 max-h-[40vh]">
                    <canvas id="energyMixChart"></canvas>
                </div>
            </section>

            <section id="loops" class="mb-16 bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-2xl font-bold text-center mb-2 text-teal-800">ุจุฎุด ุณูู: ุฏูุงูฺฉ ุณุณุชู - ุญูููโูุง ุจุงุฒุฎูุฑุฏ ูุนูุจ</h2>
                <p class="text-center text-slate-600 mb-8 max-w-4xl mx-auto">ูุดฺฉู ุจุฑู ุตุฑูุงู ูุฌููุนูโุง ุงุฒ ุนูุงูู ูุฌุฒุง ูุณุชุ ุจูฺฉู ฺฉ ุณุณุชู ูพูุง ุจุง ุญูููโูุง ุจุงุฒุฎูุฑุฏ ุชููุชโฺฉููุฏู ุงุณุช ฺฉู ูุถุนุช ุฑุง ูุฎูโุชุฑ ูโฺฉููุฏ. ุฏุงฺฏุฑุงู ุฒุฑ ฺฉ ุงุฒ ุงู ุญูููโูุง ูุนูุจ ฺฉูุฏ (ยซุญููู ูุฑุณุงุด ุณุฑูุงู ู ุธุฑูุชยป) ุฑุง ูุดุงู ูโุฏูุฏ. ุจุฑุง ุชุนุงููุ ุงุฒ ุงุจุฒุงุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ.</p>
                <div class="flex justify-center gap-6 mb-4">
                    <label class="flex items-center gap-2">
                        <input type="checkbox" id="toggle-reinforcing" class="h-4 w-4" checked>
                        <span class="text-sm">ููุงุด ุญูููโูุง ุชููุช (R)</span>
                    </label>
                    <label class="flex items-center gap-2">
                        <input type="checkbox" id="toggle-balancing" class="h-4 w-4" checked>
                        <span class="text-sm">ููุงุด ุญูููโูุง ุชุนุงุฏู (B)</span>
                    </label>
                </div>
                <div class="w-full max-w-4xl mx-auto">
                    <div id="cy" class="w-full h-[600px]"></div>
                </div>
            </section>

            <!-- Sidebar for node details -->
            <div id="node-info-sidebar" class="fixed top-0 right-0 h-full w-80 max-w-sm bg-white shadow-lg p-4 transform translate-x-full transition-transform z-50">
                <div class="flex items-center justify-between mb-4 border-b pb-2">
                    <h2 id="node-info-title" class="font-bold text-lg"></h2>
                    <button id="node-info-close" class="text-slate-500 hover:text-slate-700">&times;</button>
                </div>
                <p id="node-info-desc" class="text-sm text-slate-700 mb-4"></p>
                <ul id="node-info-resources" class="list-disc pr-5 space-y-2 text-sm"></ul>
            </div>

            <section id="solutions" class="bg-teal-50 p-8 rounded-xl border-t-4 border-teal-600">
                <h2 class="text-2xl font-bold text-center mb-6 text-teal-800">ุจุฎุด ฺูุงุฑู: ูุณุฑ ูพุด ุฑู - ุฑุฆูุณ ุงูุฏุงูุงุช ูพุดููุงุฏ</h2>
                <p class="text-center text-slate-600 mb-8 max-w-4xl mx-auto">ุจุฑููโุฑูุช ุงุฒ ุงู ุจุญุฑุงู ูุงุฒููุฏ ฺฉ ุฑูฺฉุฑุฏ ุฌุงูุน ู ุณุณุชู ุงุณุช ฺฉู ุจู ุทูุฑ ููุฒูุงู ุจู ุงุจุนุงุฏ ูุฎุชูู ูุดฺฉู ุจูพุฑุฏุงุฒุฏ. ุจุฑ ุงุณุงุณ ุชุญูู ุงูุฌุงูโุดุฏูุ ุงูุฏุงูุงุช ุฒุฑ ุงุฒ ุงููุช ุจุงูุง ุจุฑุฎูุฑุฏุงุฑูุฏ:</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="font-bold text-teal-700 mb-2">ฑ. ุงุตูุงุญุงุช ุญฺฉูุฑุงู ู ุณุงุฎุชุงุฑ</h3>
                        <p class="text-sm text-slate-600">ุงูุฒุงุด ุดูุงูุชุ ูุจุงุฑุฒู ุจุง ูุณุงุฏุ ู ุชุฏูู ุงุณุชุฑุงุชฺโูุง ุจููุฏูุฏุช ู ูุงูุนโุจูุงูู ุจุฑุง ุจุฎุด ุงูุฑฺ.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="font-bold text-teal-700 mb-2">ฒ. ุงุตูุงุญ ููุดููุฏุงูู ุงุฑุงููโูุง</h3>
                        <p class="text-sm text-slate-600">ฺฉุงูุด ูุตุฑู ุจโุฑูู ู ุขุฒุงุฏุณุงุฒ ููุงุจุน ูุงูุ ููุฑุงู ุจุง ุทุฑุงุญ ุณุงุฒูฺฉุงุฑูุง ุญูุงุช ุจุฑุง ุงูุดุงุฑ ุขุณุจโูพุฐุฑ.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="font-bold text-teal-700 mb-2">ณ. ุฌุฐุจ ุณุฑูุงูโฺฏุฐุงุฑ ฺฏุณุชุฑุฏู</h3>
                        <p class="text-sm text-slate-600">ุชูุงุด ุจุฑุง ุฑูุน ููุงูุน ู ุฌุฐุจ ุณุฑูุงู ุจุฑุง ููุณุงุฒ ูุฑูฺฏุงูโูุง ู ุชูุณุนู ุดุจฺฉู ุงูุชูุงู ู ุชูุฒุน.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="font-bold text-teal-700 mb-2">ด. ุชุณุฑุน ุฏุฑ ุชูุณุนู ุชุฌุฏุฏูพุฐุฑูุง</h3>
                        <p class="text-sm text-slate-600">ุฑูุน ููุงูุน ูุงูููุ ูุงู ู ููุงูุฑุงูู ุจุฑุง ุงูุฒุงุด ุณูู ุงูุฑฺโูุง ูพุงฺฉ (ุฎูุฑุดุฏ ู ุจุงุฏ).</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="font-bold text-teal-700 mb-2">ต. ุงุฑุชูุง ุจูุฑูโูุฑ ุงูุฑฺ</h3>
                        <p class="text-sm text-slate-600">ุงุนูุงู ุงุณุชุงูุฏุงุฑุฏูุง ุจูุฑูโูุฑ ุฏุฑ ุตูุงุน ู ุณุงุฎุชูุงูโูุง ู ุงุฑุชูุง ูุฑููฺฏ ุตุฑููโุฌู.</p>
                    </div>
                     <div class="bg-white p-4 rounded-lg shadow">
                        <h3 class="font-bold text-teal-700 mb-2">ถ. ูุฏุฑุช ููุงุจุน ุขุจ</h3>
                        <p class="text-sm text-slate-600">ุชูุฌู ูฺู ุจู ุจุญุฑุงู ุขุจ ู ุชุฃุซุฑ ุขู ุจุฑ ูุฑูฺฏุงูโูุง ุจุฑูโุขุจ ุฏุฑ ุจุฑูุงููโุฑุฒโูุง ฺฉูุงู ุงูุฑฺ.</p>
                    </div>
                </div>
            </section>
        </main>

        <footer class="text-center mt-12 pt-6 border-t border-slate-300">
            <p class="text-sm text-slate-500">ุงู ุฏุงุดุจูุฑุฏ ุจุฑ ุงุณุงุณ ฺฏุฒุงุฑุด "ุชุญูู ุฌุงูุน PESTLE ู ุชูฺฉุฑ ุณุณุชู ุฏุฑ ุจุญุฑุงู ุนุฏู ุชุนุงุฏู ุจุฑู ุงุฑุงู" ุงุฌุงุฏ ุดุฏู ุงุณุช.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const data = {
                supplyDemand: {
                    labels: ['ฑณนต', 'ฑณนถ', 'ฑณนท', 'ฑณนธ', 'ฑณนน', 'ฑดฐฐ', 'ฑดฐฑ', 'ฑดฐฒ'],
                    demand: [52000, 54000, 56000, 58000, 62000, 66000, 69000, 73000], 
                    supply: [50000, 51000, 51500, 52000, 53000, 54000, 55000, 56000] 
                },
                energyMix: {
                    labels: ['ฺฏุงุฒ ุทุจุน', 'ููุช ู ูุงุนุงุช', 'ุจุฑูโุขุจ', 'ูุณุชูโุง', 'ุชุฌุฏุฏูพุฐุฑ ู ุณุงุฑ'],
                    data: [80.2, 13.5, 3.4, 2.2, 0.7]
                },
                drivers: {
                    supply: [
                        { id: 'tech', title: 'ูุฑุณูุฏฺฏ ู ูุงฺฉุงุฑุขูุฏ ุฒุฑุณุงุฎุช', icon: '๐ง', content: 'ุจุณุงุฑ ุงุฒ ูุฑูฺฏุงูโูุง ูุฏู (ุนูุฑ ูุชูุณุท ุจุด ุงุฒ ดฐ ุณุงู ุจุฑุง ูุฑูฺฏุงูโูุง ุจุฎุงุฑ) ู ุจุง ุฑุงูุฏูุงู ูพุงู (ณฐ-ณถูช) ฺฉุงุฑ ูโฺฉููุฏ. ุงู ุงูุฑ ุธุฑูุช ุชููุฏ ูุงุจู ุงุชฺฉุง ุฑุง ฺฉุงูุด ุฏุงุฏู ู ูุฒููโูุง ุฑุง ุงูุฒุงุด ูโุฏูุฏ.' },
                        { id: 'sanctions', title: 'ุชุญุฑูโูุง ุจูโุงูููู', icon: '๐ซ', content: 'ุชุญุฑูโูุง ุฏุณุชุฑุณ ุจู ุณุฑูุงูโฺฏุฐุงุฑ ุฎุงุฑุฌุ ููุงูุฑโูุง ููู ู ุชุฌูุฒุงุช ุถุฑูุฑ ุจุฑุง ููุณุงุฒ ู ุชูุณุนู ูุฑูฺฏุงูโูุง (ุจูโูฺู ุชุฌุฏุฏูพุฐุฑูุง) ุฑุง ุจู ุดุฏุช ูุญุฏูุฏ ฺฉุฑุฏูโุงูุฏ.' },
                        { id: 'investment', title: 'ฺฉูุจูุฏ ุณุฑูุงูโฺฏุฐุงุฑ', icon: '๐', content: 'ฺฉุงูุด ุดุฏุฏ ุณุฑูุงูโฺฏุฐุงุฑ ุฏุฑ ุจุฎุด ุจุฑู ุงุฒ ุณุงู ฒฐฑธุ ูุงูุน ุงุฒ ุณุงุฎุช ูุฑูฺฏุงูโูุง ุฌุฏุฏ ู ููุณุงุฒ ุดุจฺฉู ูุฑุณูุฏู ุดุฏู ู ุฑุดุฏ ุธุฑูุช ุชููุฏ ุฑุง ูุชููู ฺฉุฑุฏู ุงุณุช.' },
                        { id: 'water', title: 'ุจุญุฑุงู ุขุจ ู ุฎุดฺฉุณุงู', icon: '๐ง', content: 'ฺฉุงูุด ุดุฏุฏ ุจุงุฑูุฏฺฏ ู ุฎุดฺฉุณุงูโูุง ูพุงูพุ ุชููุฏ ุจุฑู ุงุฒ ูุฑูฺฏุงูโูุง ุจุฑูโุขุจ ุฑุง ฺฉู ุจุฎุด ููู ุงุฒ ุชูุงู ุชููุฏ ุฏุฑ ุฒูุงู ุงูุฌ ูุตุฑู ูุณุชูุฏุ ุจู ุดุฏุช ฺฉุงูุด ุฏุงุฏู ุงุณุช.' },
                        { id: 'governance', title: 'ุญฺฉูุฑุงู ู ุณูุกูุฏุฑุช', icon: '๐๏ธ', content: 'ุณูุกูุฏุฑุช ูุฒููุ ูุณุงุฏ ู ุนุฏู ูุฌูุฏ ุงุณุชุฑุงุชฺ ูู ููุณุฌู ุจุงุนุซ ุชุฎุตุต ูุงฺฉุงุฑุขูุฏ ููุงุจุน ู ุงูููุชโุฏู ุจู ูพุฑูฺูโูุง ุบุฑูุฑุชุจุท ุจู ุฌุง ุฒุฑุณุงุฎุชโูุง ุญุงุช ุดุฏู ุงุณุช.' },
                        { id: 'fuel', title: 'ฺฉูุจูุฏ ุณูุฎุช ูุฑูฺฏุงูโูุง', icon: 'โฝ', content: 'ุจุง ูุฌูุฏ ููุงุจุน ุนุธู ฺฏุงุฒุ ุจู ุฏูู ูุตุฑู ุจุงูุง ุฏุงุฎู ู ูุดฺฉูุงุช ุชูุณุนู ูุงุฏูุ ูุฑูฺฏุงูโูุง ุฏุฑ ูุตูู ุณุฑุฏ ุจุง ฺฉูุจูุฏ ฺฏุงุฒ ููุงุฌู ุดุฏู ู ูุฌุจูุฑ ุจู ุงุณุชูุงุฏู ุงุฒ ุณูุฎุชโูุง ูุงุน ู ุขูุงูุฏูโุชุฑ ูโุดููุฏ.' }
                    ],
                    demand: [
                        { id: 'subsidy', title: 'ุงุฑุงููโูุง ุณูฺฏู ุงูุฑฺ', icon: '๐ฐ', content: 'ููุช ุจุณุงุฑ ูพุงู ู ุงุฑุงููโุง ุจุฑูุ ุงูฺฏุฒู ุตุฑููโุฌู ุฑุง ุงุฒ ุจู ุจุฑุฏู ู ููุฌุฑ ุจู ูุตุฑู ุจโุฑูู ู ุงูฺฏููุง ุงุชูุงู ุฏุฑ ุจุฎุดโูุง ุฎุงูฺฏุ ุตูุนุช ู ฺฉุดุงูุฑุฒ ุดุฏู ุงุณุช.' },
                        { id: 'population', title: 'ุฑุดุฏ ุฌูุนุช ู ุดูุฑูุดู', icon: '๐จโ๐ฉโ๐งโ๐ฆ', content: 'ุงูุฒุงุด ูุฏุงูู ุฌูุนุช (ุญุฏูุฏ ธฐฐูฌฐฐฐ ูุดุชุฑฺฉ ุฌุฏุฏ ุฏุฑ ุณุงู) ู ุฑุดุฏ ุดูุฑูุดูุ ุชูุงุถุง ุจุฑู ุฏุฑ ุจุฎุดโูุง ูุณฺฉูู ู ุชุฌุงุฑ ุฑุง ุจู ุทูุฑ ูพูุณุชู ุงูุฒุงุด ูโุฏูุฏ.' },
                        { id: 'lifestyle', title: 'ุงูฺฏููุง ูุตุฑู ู ุณุจฺฉ ุฒูุฏฺฏ', icon: '๐๏ธ', content: 'ุงูุฒุงุด ุงุณุชูุงุฏู ุงุฒ ูุณุงู ุจุฑู ูพุฑูุตุฑูุ ุจูโูฺู ุณุณุชูโูุง ุชููู ูุทุจูุน ุฏุฑ ุชุงุจุณุชุงูโูุง ฺฏุฑูโุชุฑุ ูุดุงุฑ ุดุฏุฏ ุจุฑ ุดุจฺฉู ุฏุฑ ุณุงุนุงุช ุงูุฌ ูุตุฑู ูุงุฑุฏ ูโฺฉูุฏ.' },
                        { id: 'crypto', title: 'ุงุณุชุฎุฑุงุฌ ุบุฑูุฌุงุฒ ุฑูุฒุงุฑุฒ', icon: '๐ป', content: 'ุจู ุฏูู ุงุฑุฒุงู ุจูุฏู ุจุฑูุ ุงุณุชุฎุฑุงุฌ ุบุฑูุฌุงุฒ ุฑูุฒุงุฑุฒ ุจู ฺฉ ูุนุงูุช ุณูุฏุขูุฑ ุชุจุฏู ุดุฏู ฺฉู ูุตุฑู ุจุฑู ุจุงูุง ุฏุงุฑุฏ ู ูุดุงุฑ ูุถุงุนู ุจุฑ ุดุจฺฉู ุชุญูู ูโฺฉูุฏ.' },
                        { id: 'climate', title: 'ุชุบุฑุงุช ุงููู', icon: 'โ๏ธ', content: 'ุงูุฒุงุด ุฏูุง ููุง ู ููุฌโูุง ฺฏุฑูุง ุดุฏุฏุชุฑุ ุชูุงุถุง ุจุฑุง ุจุฑู ุฑุง ุฌูุช ุณุฑูุงุด ุจู ุดุฏุช ุงูุฒุงุด ุฏุงุฏู ู ูพฺฉ ูุตุฑู ุชุงุจุณุชุงู ุฑุง ุจุงูุงุชุฑ ูโุจุฑุฏ.' },
                        { id: 'industry', title: 'ุฑุดุฏ ุชูุงุถุง ุตูุนุช', icon: '๐ญ', content: 'ุชูุณุนู ุตูุงุน ุงูุฑฺโุจุฑ ุจุฏูู ุชูุฌู ุจู ูุญุฏูุฏุชโูุง ุชุฃูู ุจุฑูุ ููุฌุฑ ุจู ุงูุฒุงุด ุดุฏุฏ ุชูุงุถุง ุงุฒ ุณู ุงู ุจุฎุด ู ุงุนูุงู ุฎุงููุดโูุง ุจุฑูุงููโุฑุฒโุดุฏู ุจุฑุง ฺฉุงุฑุฎุงููโูุง ุดุฏู ุงุณุช.'}
                    ]
                }
            };


            const supplyDemandCtx = document.getElementById('supplyDemandChart').getContext('2d');
            new Chart(supplyDemandCtx, {
                type: 'line',
                data: {
                    labels: data.supplyDemand.labels,
                    datasets: [
                        {
                            label: 'ุชูุงุถุง ุจุฑู (ูฺฏุงูุงุช)',
                            data: data.supplyDemand.demand,
                            borderColor: 'rgb(220, 38, 38)',
                            backgroundColor: 'rgba(220, 38, 38, 0.1)',
                            fill: false,
                            tension: 0.3
                        },
                        {
                            label: 'ุนุฑุถู ุจุฑู (ูฺฏุงูุงุช)',
                            data: data.supplyDemand.supply,
                            borderColor: 'rgb(2, 132, 199)',
                            backgroundColor: 'rgba(2, 132, 199, 0.1)',
                            fill: false,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: 'ุฑููุฏ ุดฺฉุงู ุนุฑุถู ู ุชูุงุถุง ุจุฑู ุฏุฑ ุงุฑุงู', font: { size: 16, family: 'Vazirmatn' } },
                        tooltip: { bodyFont: { family: 'Vazirmatn' }, titleFont: { family: 'Vazirmatn' } }
                    },
                    scales: { y: { title: { display: true, text: 'ูฺฏุงูุงุช' } } }
                }
            });

            const energyMixCtx = document.getElementById('energyMixChart').getContext('2d');
            new Chart(energyMixCtx, {
                type: 'doughnut',
                data: {
                    labels: data.energyMix.labels,
                    datasets: [{
                        label: 'ุณูู ุฏุฑ ุชููุฏ ุจุฑู',
                        data: data.energyMix.data,
                        backgroundColor: ['#0d9488', '#f97316', '#3b82f6', '#8b5cf6', '#64748b'],
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: 'ุณุจุฏ ุชููุฏ ุจุฑู ุงุฑุงู (ุจุฑ ุงุณุงุณ ุณูุฎุช)', font: { size: 16, family: 'Vazirmatn' } },
                        legend: { position: 'bottom', labels: { font: { family: 'Vazirmatn' } } },
                        tooltip: { bodyFont: { family: 'Vazirmatn' }, titleFont: { family: 'Vazirmatn' } }
                    }
                }
            });
            const supplyTab = document.getElementById('supply-tab');
            const demandTab = document.getElementById('demand-tab');
            const driversContent = document.getElementById('drivers-content');

            function renderDrivers(type) {
                driversContent.innerHTML = '';
                data.drivers[type].forEach(driver => {
                    const card = `
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200 cursor-pointer hover:shadow-lg hover:border-teal-500 transition-all duration-300 driver-card">
                            <div class="flex items-center justify-between">
                                <h3 class="font-bold text-lg text-slate-700">${driver.title}</h3>
                                <span class="text-2xl">${driver.icon}</span>
                            </div>
                            <p class="text-sm text-slate-600 mt-2 hidden">${driver.content}</p>
                        </div>
                    `;
                    driversContent.insertAdjacentHTML('beforeend', card);
                });
                driversContent.querySelectorAll('.driver-card').forEach(card => {
                    card.addEventListener('click', () => {
                        card.querySelector('p').classList.toggle('hidden');
                        card.classList.toggle('bg-teal-50');
                    });
                });
            }

            supplyTab.addEventListener('click', () => {
                supplyTab.classList.replace('inactive-tab', 'active-tab');
                demandTab.classList.replace('active-tab', 'inactive-tab');
                renderDrivers('supply');
            });

            demandTab.addEventListener('click', () => {
                demandTab.classList.replace('inactive-tab', 'active-tab');
                supplyTab.classList.replace('active-tab', 'inactive-tab');
                renderDrivers('demand');
            });

            renderDrivers('supply');


        });
    </script>

    <script src="./dash/pages/causal-graph.js"></script>
    <script>
      // cache busting query param ensures the latest JSON is loaded
      initCausalGraph("data/causal-power-imbalance.json?v=" + Date.now());
    </script>
</body>
</html>
